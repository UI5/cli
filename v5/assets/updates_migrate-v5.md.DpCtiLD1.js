import{_ as e,c as a,o as t,ag as n}from"./chunks/framework.GqEjlHUe.js";const u=JSON.parse('{"title":"Migrate to v5","description":"","frontmatter":{},"headers":[],"relativePath":"updates/migrate-v5.md","filePath":"updates/migrate-v5.md"}'),i={name:"updates/migrate-v5.md"};function o(p,s,l,r,c,d){return t(),a("div",null,[...s[0]||(s[0]=[n(`<h1 id="migrate-to-v5" tabindex="-1">Migrate to v5 <a class="header-anchor" href="#migrate-to-v5" aria-label="Permalink to &quot;Migrate to v5&quot;">â€‹</a></h1><div class="tip custom-block"><p class="custom-block-title">Alpha Release Available</p><p><strong>UI5 CLI 5.0 Alpha is now available for testing! ðŸŽ‰</strong></p><p>Try the alpha release in your projects via: <code>npm i --save-dev @ui5/cli@next</code><br> Or update your global install via: <code>npm i --global @ui5/cli@next</code></p><p><strong>Note:</strong> This is a pre-release version.</p></div><h2 id="breaking-changes" tabindex="-1">Breaking Changes <a class="header-anchor" href="#breaking-changes" aria-label="Permalink to &quot;Breaking Changes&quot;">â€‹</a></h2><ul><li><p><strong>All UI5 CLI Modules require Node.js ^22.20.0 || &gt;=24.0.0</strong></p></li><li><p><strong>@ui5/cli: <code>ui5 init</code> defaults to Specification Version 5.0</strong></p></li></ul><h2 id="node-js-and-npm-version-support" tabindex="-1">Node.js and npm Version Support <a class="header-anchor" href="#node-js-and-npm-version-support" aria-label="Permalink to &quot;Node.js and npm Version Support&quot;">â€‹</a></h2><p>This release requires <strong>Node.js version v22.20.0 and higher or v24.0.0 and higher (v23 is not supported)</strong> as well as npm v8 or higher. Support for older Node.js releases has been dropped; their use will cause an error.</p><h2 id="specification-versions-support" tabindex="-1">Specification Versions Support <a class="header-anchor" href="#specification-versions-support" aria-label="Permalink to &quot;Specification Versions Support&quot;">â€‹</a></h2><p>UI5 CLI 5.x introduces <strong>Specification Version 5.0</strong>, which enables the new Component Type and brings improved project structure conventions.</p><p>Projects using older <strong>Specification Versions</strong> are expected to be <strong>fully compatible with UI5 CLI v5</strong>.</p><h2 id="ui5-cli-init-command" tabindex="-1">UI5 CLI Init Command <a class="header-anchor" href="#ui5-cli-init-command" aria-label="Permalink to &quot;UI5 CLI Init Command&quot;">â€‹</a></h2><p>The <code>ui5 init</code> command now generates projects with Specification Version 5.0 by default.</p><h2 id="component-type" tabindex="-1">Component Type <a class="header-anchor" href="#component-type" aria-label="Permalink to &quot;Component Type&quot;">â€‹</a></h2><p>The <code>component</code> type feature aims to introduce a new project type within the UI5 CLI ecosystem to support the development of UI5 component-like applications intended to run in container apps such as the Fiori Launchpad (FLP) Sandbox or testsuite environments.</p><p>This feature will allow developers to serve and build multiple UI5 application components concurrently, enhancing the local development environment for integration scenarios.</p><p><strong>Note:</strong> A component type project must contain both a <code>Component.js</code> and a <code>manifest.json</code> file in the source directory.</p><p>More details about the Component Type can be found in the <a href="./../pages/Project#component">Project: Type <code>component</code></a> documentation.</p><h3 id="migrating-from-application-to-component-type" tabindex="-1">Migrating from Application to Component Type <a class="header-anchor" href="#migrating-from-application-to-component-type" aria-label="Permalink to &quot;Migrating from Application to Component Type&quot;">â€‹</a></h3><p>If you have an existing application that you&#39;d like to migrate to the Component Type, there are several steps to follow. The migration involves updating your project configuration and restructuring your project directories to align with the Component Type conventions.</p><p><strong>Main changes</strong>:</p><ol><li>Source directories <code>src</code> and <code>test</code> instead of <code>webapp</code> and <code>webapp/test</code></li><li>Files are served under <code>/resources/&lt;namespace&gt;/</code> and <code>/test-resources/&lt;namespace&gt;/</code> paths (instead of <code>/</code> and <code>/test/</code>) <ul><li>This affects (relative)-paths in HTML files, test suite configuration, and test runner setups</li></ul></li></ol><h4 id="_1-update-ui5-yaml-configuration" tabindex="-1">1. Update <code>ui5.yaml</code> Configuration <a class="header-anchor" href="#_1-update-ui5-yaml-configuration" aria-label="Permalink to &quot;1. Update \`ui5.yaml\` Configuration&quot;">â€‹</a></h4><p>Update your <code>ui5.yaml</code> file to use the Component Type and Specification Version 5.0:</p><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">- specVersion: &quot;4.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">- type: application</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+ specVersion: &quot;5.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+ type: component</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  metadata:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: my.sample.app</span></span></code></pre></div><h4 id="_2-restructure-project-directories" tabindex="-1">2. Restructure Project Directories <a class="header-anchor" href="#_2-restructure-project-directories" aria-label="Permalink to &quot;2. Restructure Project Directories&quot;">â€‹</a></h4><p>Component Type follows a standardized directory structure:</p><ul><li><strong>Move <code>webapp/test</code> to <code>test</code></strong> - Test folder is now at the project root level</li><li><strong>Move <code>webapp</code> to <code>src</code></strong> - The source directory is now named <code>src</code> instead of <code>webapp</code></li></ul><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-M3Dge" id="tab-HNCvTgB" checked><label data-title="Before (Application)" for="tab-HNCvTgB">Before (Application)</label><input type="radio" name="group-M3Dge" id="tab-r05DwLa"><label data-title="After (Component)" for="tab-r05DwLa">After (Component)</label></div><div class="blocks"><div class="language-text vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>my-app/</span></span>
<span class="line"><span>â”œâ”€â”€ ui5.yaml</span></span>
<span class="line"><span>â”œâ”€â”€ package.json</span></span>
<span class="line"><span>â””â”€â”€ webapp/</span></span>
<span class="line"><span>    â”œâ”€â”€ Component.js</span></span>
<span class="line"><span>    â”œâ”€â”€ manifest.json</span></span>
<span class="line"><span>    â”œâ”€â”€ index.html</span></span>
<span class="line"><span>    â”œâ”€â”€ controller/</span></span>
<span class="line"><span>    â”œâ”€â”€ view/</span></span>
<span class="line"><span>    â””â”€â”€ test/</span></span>
<span class="line"><span>        â”œâ”€â”€ integration/</span></span>
<span class="line"><span>        â””â”€â”€ unit/</span></span></code></pre></div><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>my-app/</span></span>
<span class="line"><span>â”œâ”€â”€ ui5.yaml</span></span>
<span class="line"><span>â”œâ”€â”€ package.json</span></span>
<span class="line"><span>â”œâ”€â”€ src/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ Component.js</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ manifest.json</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ controller/</span></span>
<span class="line"><span>â”‚   â””â”€â”€ view/</span></span>
<span class="line"><span>â””â”€â”€ test/</span></span>
<span class="line"><span>    â”œâ”€â”€ index.html</span></span>
<span class="line"><span>    â”œâ”€â”€ integration/</span></span>
<span class="line"><span>    â””â”€â”€ unit/</span></span></code></pre></div></div></div><h4 id="_3-adjust-test-index-html" tabindex="-1">3. Adjust <code>test/index.html</code> <a class="header-anchor" href="#_3-adjust-test-index-html" aria-label="Permalink to &quot;3. Adjust \`test/index.html\`&quot;">â€‹</a></h4><p>The <code>index.html</code> file is typically moved from <code>/webapp</code> to <code>/test</code> since it&#39;s primarily used for testing the component.</p><div class="tip custom-block"><p class="custom-block-title">Note</p><p>If your application needs an HTML page for purposes other than testing, this might be an indicator that the project should continue to use the <strong>application type</strong> instead of migrating to the component type.</p></div><p>Update the bootstrap script path to the correct relative location (taking the project&#39;s namespace into account) and remove the obsolete <code>data-sap-ui-resource-roots</code> configuration:</p><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;script</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      id=&quot;sap-ui-bootstrap&quot;</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-     src=&quot;resources/sap-ui-core.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+     src=&quot;../../../../../resources/sap-ui-core.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      data-sap-ui-libs=&quot;sap.m&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      data-sap-ui-theme=&quot;sap_horizon&quot;</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-     data-sap-ui-resource-roots=&#39;{</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-         &quot;sap.ui.demo.todo&quot;: &quot;./&quot;</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-     }&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      data-sap-ui-on-init=&quot;module:sap/ui/core/ComponentSupport&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      data-sap-ui-async=&quot;true&quot;&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/script&gt;</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">Alternative: Using <code>&lt;base&gt;</code> Tag</p><p>Instead of updating the bootstrap script path, you can add a <code>&lt;base href=&quot;../../../../../&quot;&gt;</code> tag in the <code>&lt;head&gt;</code> section of your HTML file. This allows you to keep the original path references.</p><p><strong>Important:</strong> The <code>&lt;base&gt;</code> tag affects <strong>all relative URLs</strong> in the document (including images, stylesheets, links, scripts, and even in-page anchors like <code>#some-id</code>). If certain resources are not loading correctly after adding the <code>&lt;base&gt;</code> tag, check whether they were using relative paths that are now being resolved differently than intended.</p></div><h4 id="_4-adjust-test-testsuite-qunit-html" tabindex="-1">4. Adjust <code>test/testsuite.qunit.html</code> <a class="header-anchor" href="#_4-adjust-test-testsuite-qunit-html" aria-label="Permalink to &quot;4. Adjust \`test/testsuite.qunit.html\`&quot;">â€‹</a></h4><p>Simplify the test suite HTML by removing obsolete bootstrap attributes:</p><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;!DOCTYPE html&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;html&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;head&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;meta charset=&quot;utf-8&quot;&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;title&gt;QUnit test suite for Todo App&lt;/title&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;script</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-         src=&quot;../resources/sap/ui/test/starter/createSuite.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+         src=&quot;../../../../../resources/sap/ui/test/starter/createSuite.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-         data-sap-ui-testsuite=&quot;test-resources/sap/ui/demo/todo/testsuite.qunit&quot;</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-         data-sap-ui-resource-roots=&#39;{</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-             &quot;test-resources.sap.ui.demo.todo&quot;: &quot;./&quot;</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-         }&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     &gt;&lt;/script&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/head&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;body&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/body&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/html&gt;</span></span></code></pre></div><p><strong>Changes:</strong></p><ul><li>Remove the <code>data-sap-ui-testsuite</code> attribute</li><li>Remove the <code>data-sap-ui-resource-roots</code> attribute</li><li>Update the <code>src</code> path to the correct relative location</li></ul><h4 id="_5-adjust-test-testsuite-qunit-js" tabindex="-1">5. Adjust <code>test/testsuite.qunit.js</code> <a class="header-anchor" href="#_5-adjust-test-testsuite-qunit-js" aria-label="Permalink to &quot;5. Adjust \`test/testsuite.qunit.js\`&quot;">â€‹</a></h4><p>Update the test suite configuration to remove obsolete path mappings:</p><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  sap.ui.define(function () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      return {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          name: &quot;QUnit test suite for Todo App&quot;,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          defaults: {</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-             page: &quot;ui5://test-resources/sap/ui/demo/todo/Test.qunit.html?testsuite={suite}&amp;test={name}&quot;,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              qunit: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                  version: 2</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-             },</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-             loader: {</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-                 paths: {</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-                     &quot;sap/ui/demo/todo&quot;: &quot;../&quot;</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-                 }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          tests: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              // ... test definitions</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span></code></pre></div><h4 id="_6-delete-obsolete-test-files" tabindex="-1">6. Delete Obsolete Test Files <a class="header-anchor" href="#_6-delete-obsolete-test-files" aria-label="Permalink to &quot;6. Delete Obsolete Test Files&quot;">â€‹</a></h4><p>Delete the custom <code>test/Test.qunit.html</code> file from your test directory. This file is no longer needed. The framework-provided test page can now be used directly.</p><h4 id="_7-update-additional-paths" tabindex="-1">7. Update Additional Paths <a class="header-anchor" href="#_7-update-additional-paths" aria-label="Permalink to &quot;7. Update Additional Paths&quot;">â€‹</a></h4><p>Depending on your project setup, you might need to update additional paths in configuration files or test runners to reflect the new structure. The test suite is now served under the standard <code>/test-resources/</code> path with the component&#39;s full namespace (e.g. <code>/test-resources/sap/ui/demo/todo/testsuite.qunit.html</code>).</p><h2 id="learn-more" tabindex="-1">Learn More <a class="header-anchor" href="#learn-more" aria-label="Permalink to &quot;Learn More&quot;">â€‹</a></h2><ul><li><a href="./../pages/Project#component">Project: Type <code>component</code></a></li><li><a href="./../pages/Configuration#specification-version-5-0">Configuration: Specification Version 5.0</a></li><li><a href="https://github.com/UI5/cli/blob/-/rfcs/0018-component-type.md" target="_blank" rel="noreferrer">RFC 0018: Component Type</a></li></ul>`,47)])])}const g=e(i,[["render",o]]);export{u as __pageData,g as default};
