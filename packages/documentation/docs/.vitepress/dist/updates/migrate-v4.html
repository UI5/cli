<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Migrate to v4 | VitePress</title>
    <meta name="description" content="A VitePress site">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.DSaPWSqg.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.BXNXXhu6.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.CWt1tcxf.js">
    <link rel="modulepreload" href="/assets/chunks/framework.CBTkueSR.js">
    <link rel="modulepreload" href="/assets/updates_migrate-v4.md.DEFkbQjG.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/" data-v-1168a8e4><!--[--><!--]--><!----><span data-v-1168a8e4>VitePress</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!----></div><!----><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _updates_migrate-v4" data-v-39a288b8><div><h1 id="migrate-to-v4" tabindex="-1">Migrate to v4 <a class="header-anchor" href="#migrate-to-v4" aria-label="Permalink to &quot;Migrate to v4&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">&quot;New Release&quot;</p><p><strong>UI5 CLI 4.0 has been released on July 24, 2024 🎉</strong></p><p>And find the announcement blog post here: <strong><a href="https://community.sap.com/t5/technology-blogs-by-sap/ui5-tooling-4-0/ba-p/13769578" target="_blank" rel="noreferrer">SAP Community: UI5 CLI 4.0</a></strong></p></div><h2 id="ui5-2-x-compatibility" tabindex="-1">UI5 2.x Compatibility <a class="header-anchor" href="#ui5-2-x-compatibility" aria-label="Permalink to &quot;UI5 2.x Compatibility&quot;">​</a></h2><p><em>Also see the blog post <a href="https://community.sap.com/t5/open-source-blogs/introducing-openui5-2-x/ba-p/13580633" target="_blank" rel="noreferrer">SAP Community: Introducing OpenUI5 2.x</a></em></p><p>UI5 CLI 4.0 is required for building UI5 2.x projects. The UI5 2.x framework libraries define Specification Version 4.0 and therefore can&#39;t be built using older UI5 CLI versions.</p><p>For applications and libraries running with UI5 2.x, the use of Specification Version 4.0 is not enforced. It is highly recommended, however, since only then UI5 CLI will ensure UI5 2.x compatibility of the generated bundles.</p><h2 id="node-js-and-npm-version-support" tabindex="-1">Node.js and npm Version Support <a class="header-anchor" href="#node-js-and-npm-version-support" aria-label="Permalink to &quot;Node.js and npm Version Support&quot;">​</a></h2><p>This release requires <strong>Node.js version v20.11.0 and higher or v22.0.0 and higher (v21 is not supported)</strong> as well as npm v8 or higher. Support for older Node.js releases has been dropped; their use will cause an error.</p><h2 id="specification-versions-support" tabindex="-1">Specification Versions Support <a class="header-anchor" href="#specification-versions-support" aria-label="Permalink to &quot;Specification Versions Support&quot;">​</a></h2><p>As with UI5 CLI 3.x, all projects with Specification Versions 2.0 and higher are supported.</p><p>If a legacy specification version is detected, an automatic migration is attempted. Old projects might therefore still work, unless they have a non-standard configuration in their ui5.yaml.</p><h2 id="changes-for-projects" tabindex="-1">Changes for Projects <a class="header-anchor" href="#changes-for-projects" aria-label="Permalink to &quot;Changes for Projects&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">&quot;No changes for Specification Versions 2.x and 3.x&quot;</p><p>Projects defining <strong>Specification Version 2.x or 3.x</strong> are expected to be <strong>fully compatible with UI5 CLI v4</strong></p></div><h3 id="changes-for-specification-version-4-0" tabindex="-1">Changes for Specification Version 4.0 <a class="header-anchor" href="#changes-for-specification-version-4-0" aria-label="Permalink to &quot;Changes for Specification Version 4.0&quot;">​</a></h3><p>Projects defining <strong>Specification Version 2.x or 3.x</strong> are expected to be <strong>fully compatible with UI5 Tooling v4</strong></p><p>The following does not apply to them. :::</p><p>For projects defining the latest <strong>Specification Version 4.0 or higher</strong>, the following changes apply:</p><ul><li><p><strong>Breaking Change:</strong> Bundling of JavaScript modules requiring &quot;top level scope&quot; as a string is terminated.</p><p>In UI5 2.x, the feature of evaluating modules from a string is expected to be removed. Therefore, when using the latest Specification Version, UI5 CLI will <strong>omit affected module from the bundle and log an error message instead.</strong></p><p>For more details, see <a href="/Builder.html#javascript-files-requiring-top-level-scope">Builder: JavaScript Files Requiring Top Level Scope</a>.</p></li><li><p><strong>Breaking Change:</strong> New <code>async</code> option for the <code>require</code> sections of bundle definitions.</p><p>This option defaults to <code>true</code> for Specification Version 4.0 and higher, <strong>which can influence the loading behavior of your project</strong>. Require sections are now expressed using <code>sap.ui.require</code> instead of <code>sap.ui.requireSync</code>. The latter is not available in UI5 2.x.</p><p>Note that the same default applies for all standard bundles as well, like the component- or library preloads as well as self-contained bundles.</p><p>See <a href="/Configuration.html#properties">Configuration: <code>bundleDefinition.sections</code></a> for more on the new <code>async</code> option.</p></li><li><p><strong>Breaking Change:</strong> Removal of the <code>usePredefineCalls</code> <a href="/Configuration.html#properties">bundle option</a>. UI5 CLI v4 will <em>always</em> use <code>sap.ui.predefine</code> calls in bundles, making this option obsolete.</p><p><strong>We do not expect any negative impact</strong> on projects due to this change, therefore it is active independently of the Specification Version. However, when upgrading to Specification Version 4.0 you might need to remove the property if you have it in your ui5.yaml configuration.</p></li></ul><p>You can find a summary of the above at <a href="/Configuration.html#specification-version-40">Configuration: Specification Version 4.0</a>.</p><h2 id="migrate-your-code" tabindex="-1">Migrate Your Code <a class="header-anchor" href="#migrate-your-code" aria-label="Permalink to &quot;Migrate Your Code&quot;">​</a></h2><p>When using the Node.js API of UI5 CLI, or when integrating it into other tools, the following changes might be relevant to you:</p><h3 id="changes-to-ui5-cli" tabindex="-1">Changes to @ui5/cli <a class="header-anchor" href="#changes-to-ui5-cli" aria-label="Permalink to &quot;Changes to @ui5/cli&quot;">​</a></h3><p>Occurrences of <code>console.log</code> in the code base are replaced with <code>process.stderr</code>. Аny scripts that capture the output from <code>console.log</code> need to be adjusted to rely on <code>process.stderr</code>.</p><h3 id="changes-to-ui5-fs" tabindex="-1">Changes to @ui5/fs <a class="header-anchor" href="#changes-to-ui5-fs" aria-label="Permalink to &quot;Changes to @ui5/fs&quot;">​</a></h3><p>Non-public <code>DuplexCollection#byGlobSource</code> API has been removed.</p><h3 id="changes-to-ui5-builder" tabindex="-1">Changes to @ui5/builder <a class="header-anchor" href="#changes-to-ui5-builder" aria-label="Permalink to &quot;Changes to @ui5/builder&quot;">​</a></h3><ul><li><p><strong>Bundling</strong>: The <code>usePredefineCalls</code> option has been removed. Bundling now enforces the use of <code>sap.ui.predefine</code> instead of function wrappers.</p></li><li><p><strong>Task API</strong>: The <code>namespace</code> option has been renamed to <code>projectNamespace</code>. For more information, check the documentation for <a href="/extensibility/CustomTasks.html#task-implementation">CustomTasks API</a></p></li><li><p><strong>New Option</strong>: Added a new <code>async</code> option for <code>builder.bundles.bundleDefinition.section</code>.</p></li></ul><div class="important custom-block github-alert"><p class="custom-block-title">Example</p><p></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">builder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">   bundles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">bundleDefinition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">       name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;app.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">       sections</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">require</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">           filters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">some/app/Component.js</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">           resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">           sort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">           async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div></div><h3 id="changes-to-ui5-project" tabindex="-1">Changes to @ui5/project <a class="header-anchor" href="#changes-to-ui5-project" aria-label="Permalink to &quot;Changes to @ui5/project&quot;">​</a></h3><p><strong>Default Workspace Name</strong>: The default <code>workspaceName</code> is now <code>&quot;default&quot;</code> for API usage.</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {graphFromPackageDependencies} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@ui5/project/graph&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">graphFromPackageDependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* workspaceName: &quot;default&quot; */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>Directory Naming</strong>: The <code>ui5HomeDir</code> has been renamed to <code>ui5DataDir</code> in APIs.</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Resolver </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@ui5/project/ui5Framework/Openui5Resolver&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Resolver.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolveVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.120.15&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ui5DataDir: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;~/.ui5&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cwd: process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cwd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><ul><li><strong>Dependencies</strong>: The <code>@ui5/builder</code> is now an optional dependency to the <code>@ui5/project</code></li></ul><p>Consumers of the Node.js API that make use of the <code>ProjectGraph#build</code> method need to declare a dependency to <code>@ui5/builder</code> in their respective <code>package.json</code>. The package manager should ensure that the version fulfills the range specified in the <code>package.json</code> of <code>@ui5/project</code>.</p><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><h3 id="app-stops-working-with-ui5-1-71" tabindex="-1">App Stops Working With UI5 1.71 <a class="header-anchor" href="#app-stops-working-with-ui5-1-71" aria-label="Permalink to &quot;App Stops Working With UI5 1.71&quot;">​</a></h3><p>This might be caused by a mismatch of your project&#39;s manifest version and your UI5 version.</p><p>UI5 CLI v4 enhances the manifest.json with information about the <code>supportedLocales</code> (also see <a href="/Builder.html#generation-of-supported-locales">Builder: Generation of Supported Locales</a>). In UI5 1.71 this configuration is not supported and leads to an ambiguous error message <code>TypeError: invalid input</code> and a failure to process the manifest file.</p><p>UI5 CLI uses the manifest&#39;s <code>_version</code> property to decide whether the <code>supportedLocales</code> can be generated. For UI5 1.71, only versions up to <code>1.17.0</code> are supported. See <a href="https://sdk.openui5.org/#/topic/be0cf40f61184b358b5faedaec98b2da" target="_blank" rel="noreferrer">UI5 Demo Kit: Descriptor for Applications, Components, and Libraries (manifest.json)</a> for a mapping per manifest version.</p><p>To resolve this issue, adjust the manifest version according to the UI5 version you are using.</p><p><em>This issue was first raised here: <a href="https://github.com/UI5/cli/issues/988" target="_blank" rel="noreferrer">UI5 CLI #988</a></em></p></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><!----><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"benchmarking.md\":\"BzpEKz8R\",\"builder.md\":\"ssqqwD1L\",\"cli.md\":\"D5X2ohRt\",\"codeanalysis.md\":\"lj6v3W4Y\",\"configuration.md\":\"DJDUtYxO\",\"essupport.md\":\"C_9do6hM\",\"extensibility_customservermiddleware.md\":\"x59WjcrL\",\"extensibility_customtasks.md\":\"iHprFA7D\",\"extensibility_projectshims.md\":\"BoGGAAX7\",\"faq.md\":\"icEjlMM4\",\"filesystem.md\":\"D7YyUyY3\",\"gettingstarted.md\":\"CPfMgG6N\",\"homepage.md\":\"BnZy5h7J\",\"index.md\":\"Bk6Xmwmv\",\"indexjsdoc.md\":\"DfRJIwTb\",\"openui5.md\":\"BhzTxPJW\",\"overview.md\":\"Bxk3KCe3\",\"privacy.md\":\"DEAZGlsC\",\"project.md\":\"DXUu18Wn\",\"sapui5.md\":\"DzeOp_G2\",\"server.md\":\"0NEcQ1ii\",\"troubleshooting.md\":\"zLa9CUap\",\"updates_migrate-v1.md\":\"DyHoZFsd\",\"updates_migrate-v2.md\":\"CL9i7ISl\",\"updates_migrate-v3.md\":\"DII3bq7u\",\"updates_migrate-v4.md\":\"DEFkbQjG\",\"workspace.md\":\"Cozjt-6A\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"VitePress\",\"description\":\"A VitePress site\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>